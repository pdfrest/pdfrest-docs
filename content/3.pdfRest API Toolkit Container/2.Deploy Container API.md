---
title: Deploy the Container
description: Everything you need to know to deploy the pdfRest API Toolkit Container with your Docker framework.
meta_title: Deploy the Container | pdfRest API Toolkit Container
meta_description: Everything you need to know to deploy the pdfRest API Toolkit Container with your Docker framework.
---

## Image on Docker Hub

The Container image is obtained from the public [pdfRest Docker Hub repository](https://hub.docker.com/r/pdfrest/pdf-api-toolkit). Submit a [request form for a Free Trial License Key](https://pdfrest.com/container-license-key-request).

You can use `docker pull` to retrieve the image or `docker run` to pull and start a new container. Commands are found on the repository page. Below are instructions for deploying the image via a Dockerfile or with Kubernetes.

::alert{type="secondary" icon="lucide:info"}
Official Docker documentation is located [here](https://docs.docker.com/reference/cli/docker/image/load/)
::


## Using the API Toolkit Container image

This guide covers two containerized deployment methods, Docker and Kubernetes. It references some Environment Variables which are covered in-depth in the [Configure Container Guide](/pdfrest-api-toolkit-container/configure-container-api/).

### Docker Compose

Docker Compose is a tool that allows you to define and manage Docker deployments using a simple YAML file. Run the defined service(s) by executing `docker compose up` in the directory containing the `docker-compose.yml` file.

::alert{type="secondary" icon="lucide:triangle-alert"}
The `docker compose up -d` command starts the containers in the background and leaves them running. Refer to the [Docker Compose reference docs](https://docs.docker.com/reference/cli/docker/compose/up/) for more information and commands.
::

A simple [Docker Compose](https://docs.docker.com/get-started/workshop/08_using_compose/) file to define the pdfRest API Toolkit Container can be found below:

```bash
services:
  pdfrest:
    platform: linux/amd64
    image: pdfrest/pdf-api-toolkit:latest
    restart: always
    environment:
      - PDFREST_SERVER_DOMAIN=https://pdfrest.YOUR-COMPANY-HERE.com
      - LICENSE_KEY=YOUR-LICENSE-KEY-VALUE-HERE
    ports:
     - "80:3000"
    volumes:
      - /tmp:/opt/datalogics/public
```

This will instruct Docker to pull the latest image from the [pdfRest Docker Hub repository](https://hub.docker.com/r/pdfrest/pdf-api-toolkit) and deploy that on a Linux machine.

Below are the `environment` variables, read the [Configuration guide](/pdfrest-api-toolkit-container/configure-container-api/)) for more information:

- The optional `PDFREST_SERVER_DOMAIN` Environment Variable formats the input and output URLs of documents uploaded to and processed by the API.

- The `LICENSE_KEY` variable is required to properly license the server. Without setting this variable before deploying, pdfRest will run in a reduced capabilities mode. Submit a [request for a Free Trial License Key](https://pdfrest.com/container-license-key-request).

- The `ports` section of the YAML instructs the stack to listen for API calls on port 80 and forward those calls to port 3000 inside of the container.

::alert{type="secondary" icon="lucide:triangle-alert"}
You can change the listener to a port other than 80, but 3000 is mandatory for the forwarding port.
::

If you require shared storage between multiple pdfRest containers, set up a shared volume as described in the [Docker storage volume documentation](https://docs.docker.com/storage/volumes) and configure the `volumes` section of the YAML to mount that volume as shown below:

```bash
volumes:
  - <your_volume>:/opt/datalogics/public
```

### Kubernetes

Using the image previously loaded with `docker load` you can now create and expose a deployment. The only item to note is that the pdfRest server listens on port 3000

```bash
kubectl create deployment pdfrest --image=pdfrest/pdf-api-toolkit:latest
```

```bash
kubectl expose deployment pdfrest --type=NodePort --port=3000
```

When running multiple instances you will want to set up a shared volume so that all instances of pdfRest can read and write to the same location. This ensures that all input and output documents are available no matter which instance a processing or retrieval API call load-balances to. This requires the creation of a PersistentVolume.

Here, we will demonstrate with a _hostPath_ PersistentVolume for testing and development purposes. It is not recommended to use a hostPath in a production cluster. A cluster administrator should provision a networked resource such as an NFS share, a Google Cloud persistent disk, Azure File Share, or an AWS EFS volume.

First, create the PersistentVolume:

```bash
apiVersion: v1
kind: PersistentVolume
metadata:
  name: pdfrest-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteMany
  hostPath:
    path: "/mnt/data"
```

save it as `pdfrest-pv.yaml` and apply it to your deployment with:

```bash
kubectl apply -f pdfrest-pv.yaml
```

This configuration specifies that the volume will be found at `/mnt/data/` on the cluster Node. It also defines the StorageClass name for the PersistentVolume as `manual`, which will be used to bind PersistentVolumeClaim requests to this PersistentVolume.

Then, create the PersistentVolumeClaim:

```bash
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: pdfrest-pvc
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 10Gi
```

Save it as `pdfrest-pvc.yaml` and apply it to your deployment with:

```bash
kubectl apply -f pdfrest-pvc.yaml
```

The PersistentVolumeClaim should be automatically bound to the PersistentVolume you created.

Then configure the pdfRest deployment to use the PersistentVolumeClaim you made as a volume.

```bash
kubectl edit deployment pdfrest
```

Edit the `deployment.yaml`, under `spec > template > spec`:

```bash
spec:
# ...
  template:
    # ...
    spec:
      # Add the PersistentVolumeClaim under volumes
      volumes:
      - name: pdfrest-storage
        persistentVolumeClaim:
          claimName: pdfrest-pvc
      containers:
        # Mount to the /opt/datalogics/public directory
        volumeMounts:
          - name: pdfrest-storage
            mountPath: /opt/datalogics/public
```

